import{a as ne,b as ie}from"./chunk-4YBTQDPN.js";import{a as U}from"./chunk-NAJAWU72.js";import{a as Y,b as q,c as J,d as K,e as Q,f as W,g as X,h as Z,i as ee,j as te}from"./chunk-MX3EZ4PD.js";import{P as j,w as D}from"./chunk-PDR5UM57.js";import{q as E,r as u,t as z,u as b,v as H}from"./chunk-ERJNKWX5.js";import{$a as x,Ab as L,Bb as O,Ja as i,Kb as F,Lb as R,Na as N,Sa as T,Wa as d,_a as l,ab as C,ac as G,bc as y,da as M,dc as $,fb as r,gb as s,hb as P,ib as h,jb as S,ka as k,la as v,lb as g,ma as _,nb as m,ob as c,qc as B,ta as w,zb as p}from"./chunk-V72LI5IB.js";var Ne=E("[Event] Get Event list"),Le=E("[Event] Get Event"),Oe=E("[Event] Get Event to edit"),Ae=E("[Event] Set Event list",u()),Me=E("[Event] Set Event",u()),ke=E("[Event] Set Event to edit",u()),Fe=E("[Event] Add Event (STATE)",u()),Re=E("[Event] Add Event (API)",u()),Ge=E("[Event] Modify Event (STATE)",u()),$e=E("[Event] Subscr Event (STATE)",u()),Be=E("[Event] Delete Event (STATE)",u());var A=H("eventsState"),oe=()=>b(A,t=>t.events),Ue=()=>b(A,t=>t.eventView),je=()=>b(A,t=>t.eventToEdit);var V=class t{constructor(){this.action=new w}ngOnInit(){}emitAction(n){this.action.emit(n)}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-events-command-bar"]],outputs:{action:"action"},standalone:!1,decls:4,vars:0,consts:[[1,"bar"],["mat-raised-button","",1,"createButton",3,"click"]],template:function(e,a){e&1&&(r(0,"p",0)(1,"mat-toolbar")(2,"button",1),m("click",function(){return a.emitAction(0)}),p(3," \u{1F5E1} Create event \u{1F5E1} "),s()()())},dependencies:[j,D],styles:[".bar[_ngcontent-%COMP%]{display:inline-flex;align-content:baseline;margin:2rem}.createButton[_ngcontent-%COMP%]{font-family:charming;font-size:6vw;color:#000}"]})}};function pe(t,n){if(t&1&&(r(0,"div",5),P(1,"app-event-profile",6),s()),t&2){let e=n.$implicit;i(),l("eventProfile",e)}}function ve(t,n){if(t&1){let e=g();r(0,"li",9)(1,"a",10),m("click",function(){let o=v(e).$implicit,f=c(3);return _(f.changePage(o))}),p(2),s()()}if(t&2){let e=n.$implicit,a=c(3);C("active",e===a.currentPage),i(2),L(e)}}function _e(t,n){if(t&1){let e=g();r(0,"nav",7)(1,"ul",8)(2,"li",9)(3,"a",10),m("click",function(){v(e);let o=c(2);return _(o.changePage(o.currentPage-1))}),p(4,"prev"),s()(),d(5,ve,3,3,"li",11),r(6,"li",9)(7,"a",10),m("click",function(){v(e);let o=c(2);return _(o.changePage(o.currentPage+1))}),p(8,"next"),s()()()()}if(t&2){let e=c(2);i(2),C("disabled",e.currentPage===1),i(3),l("ngForOf",e.pages),i(),C("disabled",e.currentPage===e.totalPages)}}function de(t,n){if(t&1&&(r(0,"div")(1,"div",1)(2,"div",2),d(3,pe,2,1,"div",3)(4,_e,9,5,"nav",4),s()()()),t&2){let e=c();i(3),l("ngForOf",e.paginatedEvents),i(),l("ngIf",e.paginatedEvents.length>=5)}}function Ee(t,n){if(t&1&&(r(0,"div",5),P(1,"app-event-profile",6),s()),t&2){let e=n.$implicit;i(),l("eventProfile",e)}}function fe(t,n){if(t&1){let e=g();r(0,"li",9)(1,"a",10),m("click",function(){let o=v(e).$implicit,f=c(3);return _(f.changePage(o))}),p(2),s()()}if(t&2){let e=n.$implicit,a=c(3);C("active",e===a.currentPage),i(2),L(e)}}function ge(t,n){if(t&1){let e=g();r(0,"nav",7)(1,"ul",8)(2,"li",9)(3,"a",10),m("click",function(){v(e);let o=c(2);return _(o.changePage(o.currentPage-1))}),p(4,"prev"),s()(),d(5,fe,3,3,"li",11),r(6,"li",9)(7,"a",10),m("click",function(){v(e);let o=c(2);return _(o.changePage(o.currentPage+1))}),p(8,"next"),s()()()()}if(t&2){let e=c(2);i(2),C("disabled",e.currentPage===1),i(3),l("ngForOf",e.pages),i(),C("disabled",e.currentPage===e.totalPages)}}function ue(t,n){if(t&1&&(r(0,"div")(1,"div",1)(2,"div",2),d(3,Ee,2,1,"div",3)(4,ge,9,5,"nav",4),s()()()),t&2){let e=c();i(3),l("ngForOf",e.paginatedEvents),i(),l("ngIf",e.paginatedEvents.length>=5)}}function Ce(t,n){if(t&1&&(r(0,"th",21),p(1),s()),t&2){let e=c().$implicit;x("font-family","white_storm")("font-size","3vw"),i(),O(" ",e.header," ")}}function Te(t,n){if(t&1&&(r(0,"td",22),p(1),s()),t&2){let e=n.$implicit,a=c().$implicit;x("font-family","cardinal")("font-size","3vw"),i(),O(" ",e[a.fieldName]," ")}}function xe(t,n){if(t&1&&(h(0,19),d(1,Ce,2,5,"th",15)(2,Te,2,5,"td",20),S()),t&2){let e=n.$implicit;l("matColumnDef",e.fieldName)}}function Pe(t,n){t&1&&(r(0,"th",21),p(1," Actions "),s()),t&2&&x("font-family","white_storm")("font-size","3vw")}function he(t,n){if(t&1){let e=g();r(0,"td",22)(1,"button",23),m("click",function(){let o=v(e).$implicit,f=c(2);return _(f.selectEvent(o,0))}),p(2," View "),s(),r(3,"button",23),m("click",function(){let o=v(e).$implicit,f=c(2);return _(f.selectEvent(o,1))}),p(4," Delete "),s()()}t&2&&(i(),x("font-size","3vw")("font-family","cardinal"),i(2),x("font-size","3vw")("font-family","cardinal"))}function Se(t,n){t&1&&P(0,"tr",24)}function we(t,n){t&1&&P(0,"tr",25)}function ye(t,n){if(t&1&&(r(0,"div")(1,"table",12),d(2,xe,3,1,"ng-container",13),h(3,14),d(4,Pe,2,4,"th",15)(5,he,5,8,"td",16),S(),d(6,Se,1,0,"tr",17)(7,we,1,0,"tr",18),s()()),t&2){let e=c();i(),l("dataSource",e.events),i(),l("ngForOf",e.headers),i(4),l("matHeaderRowDef",e.eventNamesFields),i(),l("matRowDefColumns",e.eventNamesFields)}}var I=class t{constructor(){this.headers=[];this.events=[];this.event=new w;this.eventNamesFields=[];this.currentPage=1;this.itemsPerPage=5;this.paginatedEvents=[];this.totalPages=1;this.pages=[]}ngOnInit(){this.getHeaderFields()}ngOnChanges(){this.updatePagination()}getHeaderFields(){this.eventNamesFields=this.headers.map(n=>n.fieldName),this.eventNamesFields.push("actions")}selectEvent(n,e){this.event.emit({event:n,action:e})}updatePagination(){this.totalPages=Math.ceil(this.events.length/this.itemsPerPage),this.paginatedEvents=this.events.slice((this.currentPage-1)*this.itemsPerPage,this.currentPage*this.itemsPerPage),this.pages=[];for(let n=1;n<=this.totalPages;n++)this.pages.push(n)}changePage(n){n<1||n>this.totalPages||(this.currentPage=n,this.updatePagination())}changeItemsPerPage(n){this.itemsPerPage=n,this.currentPage=1,this.updatePagination()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-events-list"]],inputs:{headers:"headers",events:"events"},outputs:{event:"event"},standalone:!1,features:[k],decls:3,vars:3,consts:[[4,"isGranted"],[1,"container-fluid","m-3"],[1,"d-flex","flex-column","align-items-center"],["class","mb-3 w-100 w-md-80 w-lg-75",4,"ngFor","ngForOf"],["aria-label","paginator",4,"ngIf"],[1,"mb-3","w-100","w-md-80","w-lg-75"],[3,"eventProfile"],["aria-label","paginator"],[1,"pagination","justify-content-center","mt-4"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","actions"],["mat-header-cell","",3,"font-family","font-size",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-cell","",3,"font-family","font-size",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,a){e&1&&d(0,de,5,2,"div",0)(1,ue,5,2,"div",0)(2,ye,8,4,"div",0),e&2&&(l("isGranted","ROLE_USER"),i(),l("isGranted","ROLE_MUTED"),i(),l("isGranted","ROLE_ADMIN"))},dependencies:[ie,ne,G,y,D,Y,J,X,K,q,Z,Q,W,ee,te],styles:[".pagination[_ngcontent-%COMP%]{font-family:white_storm;font-size:4vw!important}ul.pagination[_ngcontent-%COMP%]   li.page-item[_ngcontent-%COMP%]   a.page-link[_ngcontent-%COMP%]{font-size:3vw!important}.page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#a09782;color:#333;border:1px solid #ccc;transition:all .3s ease}.page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#c6ba98;color:#fff;border-color:#8d8d8d}.page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#eee;color:#aaa}"]})}};function De(t,n){if(t&1){let e=g();r(0,"app-events-command-bar",2),m("action",function(o){v(e);let f=c();return _(f.executeCommandBarAction(o))}),s()}}function Ve(t,n){if(t&1){let e=g();h(0),r(1,"app-events-list",3),m("event",function(o){v(e);let f=c();return _(f.selectEvent(o))}),s(),S()}if(t&2){let e=n.ngIf,a=c();i(),l("events",e)("headers",a.headers)}}var se=class t{constructor(n,e){this.router=n;this.store=e;this.headers=[{header:"eventName",fieldName:"eventName"}];this.events=[];this.events$=this.store.select(oe());this.cookieService=M(U);this.notMuted=this.cookieService.get("role")!=="ROLE_MUTED"}ngOnInit(){this.store.dispatch({type:"[Event] Get Event list"})}selectEvent(n){switch(n.action){case 0:{this.router.navigate(["events",n.event.id]);return}case 1:{this.store.dispatch({type:"[Event] Delete Event (API)",payload:n.event});return}default:}}executeCommandBarAction(n){switch(n){case 0:{this.router.navigate(["events","form"]);return}default:}}static{this.\u0275fac=function(e){return new(e||t)(N(B),N(z))}}static{this.\u0275cmp=T({type:t,selectors:[["app-events-list-page"]],standalone:!1,decls:4,vars:4,consts:[[3,"action",4,"ngIf"],[4,"ngIf"],[3,"action"],[3,"event","events","headers"]],template:function(e,a){e&1&&(r(0,"body"),d(1,De,1,0,"app-events-command-bar",0)(2,Ve,2,2,"ng-container",1),F(3,"async"),s()),e&2&&(i(),l("ngIf",a.notMuted),i(),l("ngIf",R(3,2,a.events$)))},dependencies:[y,V,I,$],styles:["body[_ngcontent-%COMP%]{min-height:100vh;width:100%;background-image:url(/assets/png/beer_swords.png);background-blend-mode:overlay;background-size:37vw 50vw;background-repeat:no-repeat;background-attachment:fixed;background-position:center;background-position-y:87%}"]})}};export{Ae as a,Me as b,ke as c,Fe as d,Ge as e,$e as f,Be as g,Ue as h,je as i,se as j};
