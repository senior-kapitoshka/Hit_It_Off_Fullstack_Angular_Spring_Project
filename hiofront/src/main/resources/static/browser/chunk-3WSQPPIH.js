import{a as Ie}from"./chunk-7JXI2CAY.js";import{d as xe}from"./chunk-KY7KR6J2.js";import"./chunk-YRHSEGCE.js";import{a as we}from"./chunk-ONP5GMX3.js";import{a as V}from"./chunk-4YBTQDPN.js";import{a as Me,b as Te}from"./chunk-MZRYC2F6.js";import{a as g}from"./chunk-NAJAWU72.js";import"./chunk-BYXBJQAS.js";import{s as He}from"./chunk-MX3EZ4PD.js";import{w as be}from"./chunk-PDR5UM57.js";import{a as te,b as ke,c as ie,d as ne}from"./chunk-PLDY3HMN.js";import{A as Pe,B as ee,p as Ee,q as w,r as X,t as F,u as Z,v as Ce,y as Se,z as L}from"./chunk-ERJNKWX5.js";import{$ as k,Ab as ce,Bb as K,D as E,Hb as pe,Ja as o,Kb as le,Lb as ve,Na as d,Sa as y,Ta as O,W as se,Wa as h,X as q,_a as c,a as I,aa as H,ab as A,ac as de,b as B,bc as C,ca as T,da as _,dc as fe,ec as ge,fb as r,gb as s,gc as ue,hb as R,ib as N,ic as he,j as re,jb as D,ka as ae,la as l,lb as u,ma as v,n as Y,nb as f,ob as m,qc as S,r as J,t as b,ta as me,tc as _e,uc as ye,v as W,vc as Q,zb as p}from"./chunk-V72LI5IB.js";var rt=w("[User] Get Details"),Oe=w("[User] Set Details",X()),st=w("[Event] Get Home Event list"),Ae=w("[Event] Set Home Event list",X());var Re=Ce("homeState"),Ne=()=>Z(Re,i=>i.details),De=()=>Z(Re,i=>i.homeEvents);var P=class i{constructor(e,t,n){this.http=e;this.rbac=t;this._cookieService=n}getDetails(){return this.http.get(`${ee.homeURL}`).pipe(q(e=>e),b(e=>(this.rbac.setAuthenticatedUser(e.user.role),this._cookieService.set("username",e.user.username),this._cookieService.set("id",e.user.id.toString()),this._cookieService.set("role",e.user.role),e)),E(e=>J(()=>e)))}getEvents(){return this.http.get(`${ee.homeURL}/my-events`).pipe(q(e=>e),E(e=>J(()=>e)))}static{this.\u0275fac=function(t){return new(t||i)(T(ue),T(Me),T(g))}}static{this.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})}};function We(i,e){if(i&1&&(r(0,"div",4),p(1),s()),i&2){let t=m();o(),K(" \u0F12\uFE0E You are subscribed to ",t.details.user.eventsAmount,` events \u0F12\uFE0E
`)}}function qe(i,e){if(i&1){let t=u();r(0,"div")(1,"div",5),p(2,"Upcoming event:"),s(),N(3,6),R(4,"app-event-profile",7),D(),r(5,"div",8)(6,"button",9),f("click",function(){l(t);let a=m();return v(a.showUserEvents())}),p(7,"\u2736More events\u2736"),s()()()}if(i&2){let t=m();o(4),c("eventProfile",t.upcomingEvent)}}function Ke(i,e){if(i&1){let t=u();r(0,"div",10),p(1," It looks like you don't have anything planned, but you can find events that interest you or create your own "),r(2,"p",11),f("click",function(){l(t);let a=m();return v(a.toEvents())}),p(3,"\u2694 here \u2694"),s()()}}var j=class i{constructor(e,t,n,a,M){this.router=e;this.store=t;this.isLog=n;this.home=a;this._cookieService=M;this.cookieService=_(g);this.detailsStore$=this.store.select(Ne());this.destroy$=new re}ngOnInit(){this.store.dispatch({type:"[User] Get Details"}),this.assignDetails()}assignDetails(){this.detailsStore$.pipe(se(this.destroy$)).subscribe(e=>{this.details=e,e&&e.events&&(this.events=e.events,e.events[0]&&(this.upcomingEvent=e.events[0]))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}hello(){return this.details&&(this.details.user&&(this.isLog.name(this.details.user.username),this._cookieService.set("username",this.details.user.username),this._cookieService.set("id",this.details.user.id.toString()),this._cookieService.set("role",this.details.user.role)),this.isLog.setId(this.details.user.id),this.isLog.setRole(this.details.user.role),this.isLog.setEventsAmount(this.details.user.eventsAmount)),this.details!==void 0?` *\u0A48\u2729\u0F3BHail and Welcome\u0F3A\u2606
        ${this.details.user.username} from ${this.details.user.city}`:"hello"}showUserEvents(){this.router.navigate(["home","my-events"])}toEvents(){this.router.navigate(["events"])}static{this.\u0275fac=function(t){return new(t||i)(d(S),d(F),d(we),d(P),d(g))}}static{this.\u0275cmp=y({type:i,selectors:[["app-home"]],standalone:!1,features:[pe([g])],decls:7,vars:4,consts:[[1,"hello"],["class","info",4,"ngIf"],[4,"ngIf"],["class","noEvents",4,"ngIf"],[1,"info"],[1,"upcoming"],[1,"eventCont"],[3,"eventProfile"],[1,"more"],["type","submit","mat-button","",3,"click"],[1,"noEvents"],[1,"here",3,"click"]],template:function(t,n){t&1&&(r(0,"body")(1,"div")(2,"div",0),p(3),s()(),h(4,We,2,1,"div",1)(5,qe,8,1,"div",2)(6,Ke,4,0,"div",3),s()),t&2&&(o(3),K(" ",n.hello()," "),o(),c("ngIf",n.details!==void 0),o(),c("ngIf",n.upcomingEvent!==void 0),o(),c("ngIf",n.upcomingEvent===void 0))},dependencies:[V,C,be],styles:[".hello[_ngcontent-%COMP%]{font-family:white_storm;font-size:6vw;text-align:center}.upcoming[_ngcontent-%COMP%]{font-family:white_storm;font-size:6vw;text-align:center;margin:3.5vw}.info[_ngcontent-%COMP%]{font-family:white_storm;font-size:6vw;text-align:center}.more[_ngcontent-%COMP%]{font-family:cardinal;font-size:6vw;text-align:center;display:grid;padding:5vw}body[_ngcontent-%COMP%]{min-height:100vh;width:100%;background-image:url(/assets/png/treasure.png);background-blend-mode:overlay;background-size:43vw 40vw;background-repeat:no-repeat;background-attachment:fixed;background-position:center;background-position-y:80%;max-width:100%}.eventCont[_ngcontent-%COMP%]{padding-top:5%;display:grid;grid-template-rows:12vw 7vw;grid-auto-rows:40px;gap:2vw;margin:5vw}.noEvents[_ngcontent-%COMP%]{font-family:white_storm;font-size:6vw;text-align:center;margin:3.5vw}.here[_ngcontent-%COMP%]{cursor:pointer}"]})}};function Qe(i,e){if(i&1&&(r(0,"div",4),R(1,"app-event-profile",5),s()),i&2){let t=e.$implicit;o(),c("eventProfile",t)}}function Xe(i,e){if(i&1){let t=u();r(0,"li",8)(1,"a",9),f("click",function(){let a=l(t).$implicit,M=m(2);return v(M.changePage(a))}),p(2),s()()}if(i&2){let t=e.$implicit,n=m(2);A("active",t===n.currentPage),o(2),ce(t)}}function Ze(i,e){if(i&1){let t=u();r(0,"nav",6)(1,"ul",7)(2,"li",8)(3,"a",9),f("click",function(){l(t);let a=m();return v(a.changePage(a.currentPage-1))}),p(4,"prev"),s()(),h(5,Xe,3,3,"li",10),r(6,"li",8)(7,"a",9),f("click",function(){l(t);let a=m();return v(a.changePage(a.currentPage+1))}),p(8,"next"),s()()()()}if(i&2){let t=m();o(2),A("disabled",t.currentPage===1),o(3),c("ngForOf",t.pages),o(),A("disabled",t.currentPage===t.totalPages)}}var $=class i{constructor(){this.headers=[];this.events=[];this.event=new me;this.eventNamesFields=[];this.currentPage=1;this.itemsPerPage=5;this.paginatedEvents=[];this.totalPages=1;this.pages=[]}ngOnInit(){this.getHeaderFields()}ngOnChanges(){this.updatePagination()}getHeaderFields(){this.eventNamesFields=this.headers.map(e=>e.fieldName),this.eventNamesFields.push("actions")}selectEvent(e,t){this.event.emit({event:e,action:t})}updatePagination(){this.totalPages=Math.ceil(this.events.length/this.itemsPerPage),this.paginatedEvents=this.events.slice((this.currentPage-1)*this.itemsPerPage,this.currentPage*this.itemsPerPage),this.pages=[];for(let e=1;e<=this.totalPages;e++)this.pages.push(e)}changePage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePagination())}changeItemsPerPage(e){this.itemsPerPage=e,this.currentPage=1,this.updatePagination()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=y({type:i,selectors:[["app-my-events"]],inputs:{headers:"headers",events:"events"},outputs:{event:"event"},standalone:!1,features:[ae],decls:5,vars:2,consts:[[1,"container-fluid","m-3"],[1,"d-flex","flex-column","align-items-center"],["class","mb-3 w-100 w-md-80 w-lg-75",4,"ngFor","ngForOf"],["aria-label","paginator",4,"ngIf"],[1,"mb-3","w-100","w-md-80","w-lg-75"],[3,"eventProfile"],["aria-label","paginator"],[1,"pagination","justify-content-center","mt-4"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"]],template:function(t,n){t&1&&(r(0,"body")(1,"div",0)(2,"div",1),h(3,Qe,2,1,"div",2)(4,Ze,9,5,"nav",3),s()()()),t&2&&(o(3),c("ngForOf",n.paginatedEvents),o(),c("ngIf",n.paginatedEvents.length>=5))},dependencies:[V,de,C],styles:[".eventCont[_ngcontent-%COMP%]{padding-top:5%;display:grid;grid-template-rows:12vw 7vw;grid-auto-rows:40px;gap:2vw}body[_ngcontent-%COMP%]{min-height:100vh;width:100%;background-image:url(/assets/png/frog.png);background-blend-mode:overlay;background-size:43vw 40vw;background-repeat:no-repeat;background-attachment:fixed;background-position:center;background-position-y:80%}.pagination[_ngcontent-%COMP%]{font-family:white_storm;font-size:4vw!important}ul.pagination[_ngcontent-%COMP%]   li.page-item[_ngcontent-%COMP%]   a.page-link[_ngcontent-%COMP%]{font-size:3vw!important}.page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#a09782;color:#333;border:1px solid #ccc;transition:all .3s ease}.page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#c6ba98;color:#fff;border-color:#8d8d8d}.page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#eee;color:#aaa}"]})}};function tt(i,e){if(i&1){let t=u();N(0),r(1,"app-my-events",1),f("event",function(a){l(t);let M=m();return v(M.selectEvent(a))}),s(),D()}if(i&2){let t=e.ngIf,n=m();o(),c("events",t)("headers",n.headers)}}var U=class i{constructor(e,t){this.router=e;this.store=t;this.headers=[{header:"eventName",fieldName:"eventName"}];this.events=[];this.events$=this.store.select(De())}ngOnInit(){this.store.dispatch({type:"[Event] Get Home Event list"})}selectEvent(e){switch(e.action){case 0:{this.router.navigate(["events",e.event.id]);return}default:}}executeCommandBarAction(e){switch(e){case 0:{this.router.navigate(["events","form"]);return}default:}}static{this.\u0275fac=function(t){return new(t||i)(d(S),d(F))}}static{this.\u0275cmp=y({type:i,selectors:[["app-my-events-page"]],standalone:!1,decls:2,vars:3,consts:[[4,"ngIf"],[3,"event","events","headers"]],template:function(t,n){t&1&&(h(0,tt,2,2,"ng-container",0),le(1,"async")),t&2&&c("ngIf",ve(1,1,n.events$))},dependencies:[C,$,fe],encapsulation:2})}};var oe=[{path:"",children:[{path:"",component:j},{path:"my-events",component:U}]}],G=class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=O({type:i})}static{this.\u0275inj=H({imports:[Q.forChild(oe),Q]})}};var je={details:{user:{id:0,username:"",email:"",city:"",about:"",eventsAmount:0,role:""},events:[]},homeEvents:[]},$e=Pe(je,L(Oe,(i,{details:e})=>B(I({},i),{details:e})),L(Ae,(i,{homeEvents:e})=>B(I({},i),{homeEvents:e})),L(xe,()=>I({},je)));var z=class i{constructor(){this.actions$=_(ke);this.homeService=_(P);this.router=_(S);this.getDetails$=te(()=>this.actions$.pipe(ie("[User] Get Details"),W(()=>this.homeService.getDetails().pipe(b(e=>({type:"[User] Set Details",details:e})),E(()=>Y)))),{dispatch:!0});this.getEvents$=te(()=>this.actions$.pipe(ie("[Event] Get Home Event list"),W(()=>this.homeService.getEvents().pipe(b(e=>({type:"[Event] Set Home Event list",homeEvents:e})),E(()=>Y)))),{dispatch:!0})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=k({token:i,factory:i.\u0275fac})}};function it(i){return Ie({keys:["details"]})(i)}var nt=[it],Ue=class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=O({type:i})}static{this.\u0275inj=H({providers:[g,_e(oe,ye()),he()],imports:[Te,ge,G,Ee,He,Se.forFeature("homeState",$e,{metaReducers:nt}),ne.forFeature([z]),ne.forRoot([])]})}};export{Ue as HomeModule,it as localStorageSyncReducer};
